<div class="container">
<div class="col-md-6 col-md-offset-3">
    <h1>Sign Up</h1>
    <p>Already have an account? Then please <a routerLink="/login">sign in</a>.</p>
    <form class="form-signin" [formGroup]="registerForm" (ngSubmit)="registerUser()">
    <div class="form-group">
        <label for="inputPassword">Email:</label>
        <input type="email" id="email" class="form-control" placeholder="E-mail address" 
            formControlName="email">
        <div class="invalid-field" *ngIf="f.email.invalid && (f.email.dirty || f.email.touched)">
            <span *ngIf="f.email.errors.required">{{requiredError}}</span>
            <span *ngIf="f.email.errors.email">email must be a valid email address</span>
        </div>
        <div class="invalid-field" *ngIf="error && error['email']">email already exists</div>
    </div>
    <div class="form-group">
        <label for="username">Username:</label>
        <input type="text" id="username" class="form-control" placeholder="Username"
            formControlName="username">
        <div class="invalid-field" *ngIf="f.username.invalid && (f.username.dirty || f.username.touched)">
            <span *ngIf="f.username.errors.required">{{requiredError}}</span>
        </div>
        <div class="invalid-field" *ngIf="error && error['username']">username already exists</div>
    </div>
    <div class="form-group">
        <label for="inputPassword">Password:</label>
        <input type="password" id="password" class="form-control" placeholder="Password"
            formControlName="password">
        <div class="invalid-field" *ngIf="f.password.invalid && (f.password.dirty || f.password.touched)">
            <span *ngIf="f.password.errors.required">{{requiredError}}</span>
            <span *ngIf="f.password.errors.minlength">password must be at least 6 characters</span>
        </div>
    </div>

    <div class="form-group">
        <label for="inputPassword">Password (again):</label>
        <input type="password" id="confirmPassword" class="form-control" placeholder="Password (again)" 
            formControlName="confirmPassword">
        <div class="invalid-field" *ngIf="f.confirmPassword.invalid && (f.confirmPassword.dirty || f.confirmPassword.touched)">
            <span *ngIf="f.confirmPassword.errors.required">{{requiredError}}</span>
            {{f.errors}}
            <span *ngIf="f.confirmPassword.errors.mustMatch">passwords must match</span>
        </div>
    </div>

    <re-captcha (resolved)="resolved($event)" #captchaRef="reCaptcha"></re-captcha>
    <button class="btn btn-primary mt-2" type="submit" [disabled]="registerForm.invalid || !recaptcha">Sign Up</button>
    </form>
</div>
</div>